(()=>{var e={};e.id=3,e.ids=[3],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5170:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),t(8748),t(5452),t(6560);var r=t(3191),a=t(8716),l=t(7922),n=t.n(l),i=t(5231),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(s,o);let d=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8748)),"/Users/lucia/Documents/GitHub/IFAIP/app/admin/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5452)),"/Users/lucia/Documents/GitHub/IFAIP/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,6560)),"/Users/lucia/Documents/GitHub/IFAIP/app/not-found.tsx"]}],c=["/Users/lucia/Documents/GitHub/IFAIP/app/admin/page.tsx"],u="/admin/page",x={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7509:(e,s,t)=>{Promise.resolve().then(t.bind(t,7433))},7433:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>f});var r=t(326),a=t(7577),l=t(5442);function n({onLoginSuccess:e}){let[s,t]=(0,a.useState)(""),[n,i]=(0,a.useState)(""),[o,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(!1),x=async t=>{t.preventDefault(),d(""),u(!0);try{let{data:t,error:r}=await l.O.auth.signInWithPassword({email:s,password:n});if(r){d(r.message||"Invalid email or password"),u(!1);return}t.user&&e()}catch(e){d(e.message||"An error occurred during login"),u(!1)}};return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:(0,r.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Admin Login"}),r.jsx("p",{className:"text-gray-600",children:"Enter your credentials to access the admin panel"})]}),(0,r.jsxs)("form",{onSubmit:x,className:"space-y-6",children:[o&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md text-sm",children:o}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),r.jsx("input",{id:"email",type:"email",value:s,onChange:e=>t(e.target.value),required:!0,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-[#36498C] focus:ring-1 focus:ring-[#36498C]",placeholder:"admin@example.com"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),r.jsx("input",{id:"password",type:"password",value:n,onChange:e=>i(e.target.value),required:!0,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-[#36498C] focus:ring-1 focus:ring-[#36498C]",placeholder:"Enter your password"})]}),r.jsx("button",{type:"submit",disabled:c,className:"w-full rounded-lg bg-[#36498C] px-4 py-2 text-sm font-semibold text-white hover:bg-[#36498C]/90 disabled:opacity-50 disabled:cursor-not-allowed",children:c?"Signing in...":"Sign In"})]})]})})}var i=t(1002);function o(){let[e,s]=(0,a.useState)(null),[t,l]=(0,a.useState)(!0);if(t)return r.jsx("div",{className:"text-center py-12 text-gray-600",children:"Loading dashboard..."});let n=e&&e.totalLeads>0?(e.totalSignups/e.totalLeads*100).toFixed(1):"0.0";return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[r.jsx(d,{title:"Total Courses",value:e?.totalCourses||0,icon:"\uD83D\uDCDA",color:"blue"}),r.jsx(d,{title:"Total Leads",value:e?.totalLeads||0,icon:"\uD83D\uDC65",color:"green"}),r.jsx(d,{title:"Total Signups",value:e?.totalSignups||0,icon:"âœ…",color:"purple"}),r.jsx(d,{title:"Conversion Rate",value:`${n}%`,icon:"\uD83D\uDCC8",color:"yellow"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[r.jsx(c,{signups:e?.recentSignups||[]}),r.jsx(u,{courses:e?.popularCourses||[]})]}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Analytics & Insights"}),r.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Analytics of all courses"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Signups by Landing Tag"}),e?.signupsByTag&&0===e.signupsByTag.length?r.jsx("p",{className:"text-sm text-gray-500",children:"No data available"}):r.jsx("div",{className:"space-y-3",children:e?.signupsByTag.map(s=>{let t=e.signupsByTag.reduce((e,s)=>e+s.count,0),a=t>0?(s.count/t*100).toFixed(1):0;return r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.tag}),r.jsxs("span",{className:"text-sm text-gray-600",children:[s.count," (",a,"%)"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-[#36498C] h-2 rounded-full",style:{width:`${a}%`}})})]},s.tag)})})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Top UTM Sources"}),e?.topUTMSources&&0===e.topUTMSources.length?r.jsx("p",{className:"text-sm text-gray-500",children:"No UTM source data available"}):r.jsx("div",{className:"space-y-2",children:e?.topUTMSources.map((e,s)=>r.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsxs("span",{className:"text-sm font-medium text-gray-400 mr-3 w-6",children:["#",s+1]}),r.jsx("span",{className:"text-sm text-gray-900",children:e.source})]}),r.jsxs("span",{className:"text-sm text-gray-600 font-medium",children:[e.count," signups"]})]},e.source))})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Signups Trend (Last 6 Months)"}),e?.signupsByMonth&&0===e.signupsByMonth.length?r.jsx("p",{className:"text-sm text-gray-500",children:"No data available"}):r.jsx("div",{className:"space-y-2",children:e?.signupsByMonth.map(s=>{let t=Math.max(...(e.signupsByMonth||[]).map(e=>e.count)),a=t>0?s.count/t*100:0,l=new Date(s.month+"-01").toLocaleDateString("en-US",{month:"short",year:"numeric"});return r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:l}),r.jsxs("span",{className:"text-sm text-gray-600",children:[s.count," signups"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-[#34B682] h-2 rounded-full",style:{width:`${a}%`}})})]},s.month)})})]})]})}function d({title:e,value:s,icon:t,color:a}){return r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:e}),r.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:s})]}),r.jsx("div",{className:"text-4xl",children:t})]})})}function c({signups:e}){return(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Signups"}),0===e.length?r.jsx("p",{className:"text-sm text-gray-500",children:"No signups yet"}):r.jsx("div",{className:"space-y-3",children:e.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),r.jsx("p",{className:"text-xs text-gray-500",children:e.email})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("p",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString()}),e.courses?.title&&r.jsx("p",{className:"text-xs text-gray-400 mt-1",children:e.courses.title})]})]},e.id))})]})}function u({courses:e}){return(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6 shadow-sm",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Popular Courses"}),0===e.length?r.jsx("p",{className:"text-sm text-gray-500",children:"No signup data yet"}):r.jsx("div",{className:"space-y-3",children:e.map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-0",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsxs)("span",{className:"text-lg font-bold text-gray-400 mr-3 w-6",children:["#",s+1]}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.title})]}),(0,r.jsxs)("span",{className:"text-sm text-gray-600 font-medium",children:[e.count," signups"]})]},e.course_id))})]})}function x({course:e,onSave:s,onCancel:t}){let[l,n]=(0,a.useState)(!1),[i,o]=(0,a.useState)({title:"",description:"",headline:"",bullet_points:"",provider:"",level:"",duration:"",tag:"",external_url:"",rating:"",reviews:"",course_type:"",key_skills:"",modules:"",instructors:"",effort:"",languages:"",free_trial:"",price_label:"",source:"admin",signup_enabled:!0}),d=async t=>{t.preventDefault(),n(!0);try{let t=i.bullet_points?i.bullet_points.split("\n").filter(e=>e.trim()):null,r={title:i.title,description:i.description||null,headline:i.headline||null,bullet_points:t,provider:i.provider||null,level:i.level||null,duration:i.duration||null,tag:i.tag||null,external_url:i.external_url||null,rating:i.rating?parseFloat(i.rating):null,reviews:i.reviews?parseInt(i.reviews):null,course_type:i.course_type||null,key_skills:i.key_skills||null,modules:i.modules||null,instructors:i.instructors||null,effort:i.effort||null,languages:i.languages||null,free_trial:i.free_trial||null,price_label:i.price_label||null,source:i.source,signup_enabled:i.signup_enabled},a=e?`/api/admin/courses/${e.id}`:"/api/admin/courses",l=await fetch(a,{method:e?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!l.ok){let e=await l.json();throw Error(e.error||"Failed to save course")}alert(e?"Course updated successfully!":"Course created successfully!"),s()}catch(e){console.error("Error saving course:",e),alert(`Failed to save course: ${e instanceof Error?e.message:"Unknown error"}`)}finally{n(!1)}};return(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:e?"Edit Course":"Add New Course"}),(0,r.jsxs)("form",{onSubmit:d,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,r.jsxs)("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),r.jsx("input",{type:"text",required:!0,value:i.title,onChange:e=>o({...i,title:e.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-[#36498C] focus:outline-none focus:ring-1 focus:ring-[#36498C]"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:i.description,onChange:e=>o({...i,description:e.target.value}),rows:3,className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-[#36498C] focus:outline-none focus:ring-1 focus:ring-[#36498C]"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Headline (max 60 chars)"}),r.jsx("input",{type:"text",maxLength:60,value:i.headline,onChange:e=>o({...i,headline:e.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-[#36498C] focus:outline-none focus:ring-1 focus:ring-[#36498C]"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Provider"}),r.jsx("input",{type:"text",value:i.provider,onChange:e=>o({...i,provider:e.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-[#36498C] focus:outline-none focus:ring-1 focus:ring-[#36498C]"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tag *"}),(0,r.jsxs)("select",{required:!0,value:i.tag,onChange:e=>o({...i,tag:e.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-[#36498C] focus:outline-none focus:ring-1 focus:ring-[#36498C]",children:[r.jsx("option",{value:"",children:"Select a tag"}),r.jsx("option",{value:"Business",children:"Business"}),r.jsx("option",{value:"Restaurant",children:"Restaurant"}),r.jsx("option",{value:"Fleet",children:"Fleet"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Level"}),(0,r.jsxs)("select",{value:i.level,onChange:e=>o({...i,level:e.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-[#36498C] focus:outline-none focus:ring-1 focus:ring-[#36498C]",children:[r.jsx("option",{value:"",children:"Select level"}),r.jsx("option",{value:"Beginner",children:"Beginner"}),r.jsx("option",{value:"Intermediate",children:"Intermediate"}),r.jsx("option",{value:"Advanced",children:"Advanced"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration"}),r.jsx("input",{type:"text",placeholder:"e.g., 4 weeks, 8 hours",value:i.duration,onChange:e=>o({...i,duration:e.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-[#36498C] focus:outline-none focus:ring-1 focus:ring-[#36498C]"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"External URL"}),r.jsx("input",{type:"url",value:i.external_url,onChange:e=>o({...i,external_url:e.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-[#36498C] focus:outline-none focus:ring-1 focus:ring-[#36498C]"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rating (1-5)"}),r.jsx("input",{type:"number",step:"0.1",min:"1",max:"5",value:i.rating,onChange:e=>o({...i,rating:e.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-[#36498C] focus:outline-none focus:ring-1 focus:ring-[#36498C]"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Number of Reviews"}),r.jsx("input",{type:"number",value:i.reviews,onChange:e=>o({...i,reviews:e.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-[#36498C] focus:outline-none focus:ring-1 focus:ring-[#36498C]"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price Label"}),r.jsx("input",{type:"text",placeholder:"e.g., Free, $99, $199/month",value:i.price_label,onChange:e=>o({...i,price_label:e.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-[#36498C] focus:outline-none focus:ring-1 focus:ring-[#36498C]"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Free Trial"}),r.jsx("input",{type:"text",placeholder:"e.g., 7-day free trial",value:i.free_trial,onChange:e=>o({...i,free_trial:e.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-[#36498C] focus:outline-none focus:ring-1 focus:ring-[#36498C]"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bullet Points (one per line)"}),r.jsx("textarea",{value:i.bullet_points,onChange:e=>o({...i,bullet_points:e.target.value}),rows:4,placeholder:"Enter bullet points, one per line",className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-[#36498C] focus:outline-none focus:ring-1 focus:ring-[#36498C]"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course Type"}),r.jsx("input",{type:"text",value:i.course_type,onChange:e=>o({...i,course_type:e.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-[#36498C] focus:outline-none focus:ring-1 focus:ring-[#36498C]"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Key Skills"}),r.jsx("input",{type:"text",value:i.key_skills,onChange:e=>o({...i,key_skills:e.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-[#36498C] focus:outline-none focus:ring-1 focus:ring-[#36498C]"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Modules"}),r.jsx("input",{type:"text",value:i.modules,onChange:e=>o({...i,modules:e.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-[#36498C] focus:outline-none focus:ring-1 focus:ring-[#36498C]"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructors"}),r.jsx("input",{type:"text",value:i.instructors,onChange:e=>o({...i,instructors:e.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-[#36498C] focus:outline-none focus:ring-1 focus:ring-[#36498C]"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Effort"}),r.jsx("input",{type:"text",placeholder:"e.g., 5 hours/week",value:i.effort,onChange:e=>o({...i,effort:e.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-[#36498C] focus:outline-none focus:ring-1 focus:ring-[#36498C]"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Languages"}),r.jsx("input",{type:"text",placeholder:"e.g., English, Spanish",value:i.languages,onChange:e=>o({...i,languages:e.target.value}),className:"w-full rounded-md border border-gray-300 px-3 py-2 focus:border-[#36498C] focus:outline-none focus:ring-1 focus:ring-[#36498C]"})]})]}),r.jsx("div",{className:"flex gap-6",children:(0,r.jsxs)("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:i.signup_enabled,onChange:e=>o({...i,signup_enabled:e.target.checked}),className:"rounded border-gray-300 text-[#36498C] focus:ring-[#36498C]"}),r.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Signup Enabled"})]})}),(0,r.jsxs)("div",{className:"flex justify-end gap-4 pt-4 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:t,className:"rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:l,className:"rounded-md bg-[#36498C] px-4 py-2 text-sm font-medium text-white hover:bg-[#36498C]/90 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Saving...":e?"Update Course":"Create Course"})]})]})]})}function m({courses:e,onEdit:s,onDelete:t}){return 0===e.length?r.jsx("div",{className:"text-center py-12 text-gray-600",children:'No courses found. Click "Add New Course" to get started.'}):r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 border border-gray-200 rounded-lg",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Title"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Provider"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tag"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Level"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.title}),e.description&&r.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.description})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.provider||"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:e.tags?.[0]||"-"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.level||"-"}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[r.jsx("button",{onClick:()=>s(e),className:"text-[#36498C] hover:text-[#36498C]/80 mr-4",children:"Edit"}),r.jsx("button",{onClick:()=>t(e.id),className:"text-red-600 hover:text-red-800",children:"Delete"})]})]},e.id))})]})})}function g(){let[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)([]),[n,o]=(0,a.useState)(!0),[d,c]=(0,a.useState)(null),[u,g]=(0,a.useState)(!1),[p,h]=(0,a.useState)(""),[y,b]=(0,a.useState)("all"),[f,j]=(0,a.useState)("all"),v=async()=>{try{o(!0);let e=await (0,i.V3)();s(e)}catch(e){console.error("Error fetching courses:",e),alert("Failed to load courses. Please check the console for details.")}finally{o(!1)}},N=async e=>{if(confirm("Are you sure you want to delete this course?"))try{if(!(await fetch(`/api/admin/courses/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete course");await v(),alert("Course deleted successfully")}catch(e){console.error("Error deleting course:",e),alert("Failed to delete course. Please check the console for details.")}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Course Management"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[t.length," of ",e.length," courses"]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{let e=new Blob([[["Title","Provider","Tag","Level","Rating","URL"],...t.map(e=>[`"${e.title}"`,`"${e.provider||""}"`,e.tags?.[0]||"",e.level||"",e.rating?.toString()||"",e.external_url||""])].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),s=URL.createObjectURL(e),r=document.createElement("a");r.href=s,r.download=`courses-${new Date().toISOString().split("T")[0]}.csv`,r.click(),URL.revokeObjectURL(s)},disabled:0===t.length,className:"rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Export CSV"}),r.jsx("button",{onClick:()=>g(!0),className:"rounded-lg bg-[#36498C] px-4 py-2 text-sm font-semibold text-white hover:bg-[#36498C]/90",children:"Add New Course"})]})]}),u?r.jsx(x,{course:d,onSave:()=>{v(),g(!1),c(null)},onCancel:()=>{g(!1),c(null)}}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Search"}),r.jsx("input",{type:"text",placeholder:"Search courses...",value:p,onChange:e=>h(e.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-[#36498C] focus:ring-1 focus:ring-[#36498C]"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Tag"}),(0,r.jsxs)("select",{value:y,onChange:e=>b(e.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-[#36498C] focus:ring-1 focus:ring-[#36498C]",children:[r.jsx("option",{value:"all",children:"All Tags"}),r.jsx("option",{value:"Business",children:"Business"}),r.jsx("option",{value:"Restaurant",children:"Restaurant"}),r.jsx("option",{value:"Fleet",children:"Fleet"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Level"}),(0,r.jsxs)("select",{value:f,onChange:e=>j(e.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-[#36498C] focus:ring-1 focus:ring-[#36498C]",children:[r.jsx("option",{value:"all",children:"All Levels"}),r.jsx("option",{value:"Beginner",children:"Beginner"}),r.jsx("option",{value:"Intermediate",children:"Intermediate"}),r.jsx("option",{value:"Advanced",children:"Advanced"})]})]})]})}),n?r.jsx("div",{className:"text-center py-12 text-gray-600",children:"Loading courses..."}):r.jsx(m,{courses:t,onEdit:e=>{c(e),g(!0)},onDelete:N})]})]})}function p(){let[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)(!0),[n,i]=(0,a.useState)("all");return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Leads Management"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[e.length," total leads"]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("select",{value:n,onChange:e=>i(e.target.value),className:"rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-[#36498C] focus:ring-1 focus:ring-[#36498C]",children:[r.jsx("option",{value:"all",children:"All Tags"}),r.jsx("option",{value:"Business",children:"Business"}),r.jsx("option",{value:"Restaurant",children:"Restaurant"}),r.jsx("option",{value:"Fleet",children:"Fleet"})]}),r.jsx("button",{onClick:()=>{let s=new Blob([[["Email","Role","Landing Tag","UTM Source","UTM Medium","UTM Campaign","Date"],...e.map(e=>[e.email,e.role||"",e.landing_tag,e.utm_source||"",e.utm_medium||"",e.utm_campaign||"",new Date(e.created_at).toLocaleDateString()])].map(e=>e.map(e=>`"${e}"`).join(",")).join("\n")],{type:"text/csv"}),t=URL.createObjectURL(s),r=document.createElement("a");r.href=t,r.download=`leads-${new Date().toISOString().split("T")[0]}.csv`,r.click(),URL.revokeObjectURL(t)},disabled:0===e.length,className:"rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Export CSV"})]})]}),t?r.jsx("div",{className:"text-center py-12 text-gray-600",children:"Loading leads..."}):0===e.length?r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:r.jsx("p",{className:"text-gray-600",children:"No leads found"})}):r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Landing Tag"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"UTM Source"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"UTM Medium"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"UTM Campaign"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.email}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.role||"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:e.landing_tag})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.utm_source||"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.utm_medium||"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.utm_campaign||"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]},e.id))})]})})})]})}function h(){let[e,s]=(0,a.useState)([]),[t,l]=(0,a.useState)(!0),[n,i]=(0,a.useState)("all");return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Signups Management"}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[e.length," recent signups"]})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)("select",{value:n,onChange:e=>i(e.target.value),className:"rounded-md border border-gray-300 px-3 py-2 text-sm focus:border-[#36498C] focus:ring-1 focus:ring-[#36498C]",children:[r.jsx("option",{value:"all",children:"All Tags"}),r.jsx("option",{value:"Business",children:"Business"}),r.jsx("option",{value:"Restaurant",children:"Restaurant"}),r.jsx("option",{value:"Fleet",children:"Fleet"})]}),r.jsx("button",{onClick:()=>{let s=new Blob([[["Name","Email","Course","Landing Tag","UTM Source","UTM Medium","UTM Campaign","Date"],...e.map(e=>[`"${e.first_name} ${e.last_name}"`,e.email,e.courses?.title||"",e.landing_tag,e.utm_source||"",e.utm_medium||"",e.utm_campaign||"",new Date(e.created_at).toLocaleDateString()])].map(e=>e.map(e=>`"${e}"`).join(",")).join("\n")],{type:"text/csv"}),t=URL.createObjectURL(s),r=document.createElement("a");r.href=t,r.download=`signups-${new Date().toISOString().split("T")[0]}.csv`,r.click(),URL.revokeObjectURL(t)},disabled:0===e.length,className:"rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Export CSV"})]})]}),t?r.jsx("div",{className:"text-center py-12 text-gray-600",children:"Loading signups..."}):0===e.length?r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:r.jsx("p",{className:"text-gray-600",children:"No signups found"})}):r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Course"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Landing Tag"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"UTM Source"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:[e.first_name," ",e.last_name]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.email}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.courses?.title||"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:e.landing_tag})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.utm_source||"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]},e.id))})]})})})]})}var y=t(7033);function b(){let[e,s]=(0,a.useState)("Business"),[t,l]=(0,a.useState)([]),[n,i]=(0,a.useState)(!0),[o,d]=(0,a.useState)(!1),c=async()=>{try{i(!0);let s=await (0,y.A_)(e);l(s)}catch(e){console.error("âŒ Error fetching courses:",e),l([])}finally{i(!1)}},u=async e=>{if(0===e||o)return;let s=[...t],r=s[e];s[e]=s[e-1],s[e-1]=r,await m(s)},x=async e=>{if(e===t.length-1||o)return;let s=[...t],r=s[e];s[e]=s[e+1],s[e+1]=r,await m(s)},m=async s=>{try{d(!0),console.log(`ðŸ’¾ Saving order for ${e} page`),console.log(`ðŸ’¾ Courses to update:`,s.map((e,s)=>({position:s+1,id:e.id,title:e.title})));let t=await fetch("/api/admin/courses/reorder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:e,courses:s.map((e,s)=>({id:e.id,position:s+1}))})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to update order")}let r=await t.json();console.log(`âœ… Order saved successfully:`,r),await new Promise(e=>setTimeout(e,500)),await c(),alert("Order updated successfully! The course pages will now show courses in this order.")}catch(e){console.error("âŒ Error saving order:",e),alert(`Failed to update order: ${e instanceof Error?e.message:"Unknown error"}`)}finally{d(!1)}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Landing Page Management"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Edit exactly what appears on the courses pages"})]}),(0,r.jsxs)("select",{value:e,onChange:e=>s(e.target.value),className:"rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 focus:border-[#36498C] focus:ring-1 focus:ring-[#36498C]",children:[r.jsx("option",{value:"Business",children:"Business"}),r.jsx("option",{value:"Restaurant",children:"Restaurant"}),r.jsx("option",{value:"Fleet",children:"Fleet"})]})]}),n?r.jsx("div",{className:"text-center py-12 text-gray-600",children:"Loading courses..."}):0===t.length?(0,r.jsxs)("div",{className:"text-center py-12 text-gray-600",children:["No courses found for ",e," landing page."]}):(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"grid grid-cols-12 gap-4 text-xs font-medium text-gray-500 uppercase",children:[r.jsx("div",{className:"col-span-1",children:"Rank"}),r.jsx("div",{className:"col-span-6",children:"Title"}),r.jsx("div",{className:"col-span-2",children:"Provider"}),r.jsx("div",{className:"col-span-3",children:"Actions"})]})}),r.jsx("div",{className:"divide-y divide-gray-200",children:t.map((e,s)=>r.jsx("div",{className:`px-6 py-4 hover:bg-gray-50 transition-colors ${s<3?"bg-blue-50":""}`,children:(0,r.jsxs)("div",{className:"grid grid-cols-12 gap-4 items-center",children:[r.jsx("div",{className:"col-span-1",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-bold text-gray-900 min-w-[20px]",children:s+1}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[r.jsx("button",{onClick:()=>u(s),disabled:0===s||o,className:"text-gray-400 hover:text-[#36498C] disabled:opacity-30 disabled:cursor-not-allowed text-xs",title:"Move up",children:"â†‘"}),r.jsx("button",{onClick:()=>x(s),disabled:s===t.length-1||o,className:"text-gray-400 hover:text-[#36498C] disabled:opacity-30 disabled:cursor-not-allowed text-xs",title:"Move down",children:"â†“"})]})]})}),(0,r.jsxs)("div",{className:"col-span-6",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.title}),r.jsx("div",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:e.description||"No description"})]}),r.jsx("div",{className:"col-span-2",children:r.jsx("div",{className:"text-sm text-gray-700",children:e.provider||r.jsx("span",{className:"text-gray-400",children:"-"})})}),r.jsx("div",{className:"col-span-3",children:s<3&&(0,r.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800",children:["Top ",s+1]})})]})},e.id))})]})]})}function f(){let[e,s]=(0,a.useState)("dashboard"),[t,i]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!0),u=async()=>{try{await l.O.auth.signOut(),i(!1)}catch(e){console.error("Error logging out:",e)}};return d?r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-[#36498C] border-r-transparent"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):t?(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b border-gray-200",children:(0,r.jsxs)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between h-16",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Administration"}),r.jsx("button",{onClick:u,className:"rounded-lg border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Logout"})]}),r.jsx("div",{className:"flex space-x-1 border-t border-gray-200",children:[{id:"dashboard",label:"Dashboard",icon:"\uD83D\uDCCA"},{id:"courses",label:"Courses",icon:"\uD83D\uDCDA"},{id:"landing-pages",label:"Landing Pages",icon:"\uD83C\uDFA8"},{id:"leads",label:"Leads",icon:"\uD83D\uDC65"},{id:"signups",label:"Signups",icon:"âœ…"}].map(t=>(0,r.jsxs)("button",{onClick:()=>s(t.id),className:`px-6 py-3 text-sm font-medium border-b-2 transition-colors ${e===t.id?"border-[#36498C] text-[#36498C]":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx("span",{className:"mr-2",children:t.icon}),t.label]},t.id))})]})}),(0,r.jsxs)("div",{className:"mx-auto max-w-7xl px-4 py-8 sm:px-6 lg:px-8",children:["dashboard"===e&&r.jsx(o,{}),"courses"===e&&r.jsx(g,{}),"landing-pages"===e&&r.jsx(b,{}),"leads"===e&&r.jsx(p,{}),"signups"===e&&r.jsx(h,{})]})]}):r.jsx(n,{onLoginSuccess:()=>{i(!0)}})}},1002:(e,s,t)=>{"use strict";t.d(s,{V3:()=>l});var r=t(5442);function a(e){let s=e.course_type||null;return{id:String(e.id||""),title:String(e.title||""),description:String(e.description||""),headline:e.headline||null,bullet_points:Array.isArray(e.bullet_points)?e.bullet_points:null,provider:e.provider||null,level:e.level||"Beginner",duration:String(e.duration||""),tags:e.tag?[e.tag]:[],external_url:e.external_url||null,priority:Number(e.priority)||999,rating:e.rating?Number(e.rating):null,reviews:e.reviews?Number(e.reviews):null,course_type:s,key_skills:e.key_skills||null,modules:e.modules||null,instructors:e.instructors||null,effort:e.effort||null,languages:e.languages||null,price:e.free_trial||void 0,source:String(e.source||""),signup_enabled:!!(e.signup_enabled??!0),is_featured:!!e.is_featured,price_label:e.price_label||null,free_trial:e.free_trial||null,created_at:e.created_at||null,updated_at:e.updated_at||null}}async function l(){try{let{data:e,error:s}=await r.O.from("courses").select("*").order("priority",{ascending:!0,nullsFirst:!1});if(s)throw console.error("Error fetching all courses:",s),s;return(e||[]).map(a)}catch(e){throw console.error("Error in getAllCourses:",e),e}}},5442:(e,s,t)=>{"use strict";t.d(s,{O:()=>n});var r=t(5157);let a="https://ktqjebihzkbhsvbqpbui.supabase.co",l="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt0cWplYmloemtiaHN2YnFwYnVpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYwNDQwNDksImV4cCI6MjA4MTYyMDA0OX0.VVd6upefHH2g23ijFyx5mv7uJJdt9Xuz9jUkL-Jn-F0";if(!a||!l)throw Error("Missing Supabase environment variables. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY");let n=(0,r.eI)(a,l,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})},7033:(e,s,t)=>{"use strict";t.d(s,{A_:()=>n});var r=t(5442);function a(e){let s=e.type||e.course_type||null;return{id:String(e.id||""),title:String(e.title||""),description:String(e.description||""),headline:e.headline||null,bullet_points:Array.isArray(e.bullet_points)?e.bullet_points:null,provider:e.provider||null,level:e.level||"Beginner",duration:String(e.duration||""),tags:e.tag?[e.tag]:[],external_url:e.external_url||null,priority:Number(e.priority)||999,rating:e.rating?Number(e.rating):null,reviews:e.reviews?Number(e.reviews):null,course_type:s,key_skills:e.key_skills||null,modules:e.modules||null,instructors:e.instructors||null,effort:e.effort||null,languages:e.languages||null,price:e.free_trial||void 0,source:String(e.source||""),signup_enabled:!!(e.signup_enabled??!0),is_featured:!!e.is_featured,price_label:e.price_label||null,free_trial:e.free_trial||null,created_at:e.created_at||null,updated_at:e.updated_at||null}}async function l(e,s={}){try{let{includeHidden:t=!1,limit:l}=s,n="Business"===e?"business_relevancy":"Restaurant"===e?"restaurant_relevancy":"fleet_relevancy";console.log(`ðŸ·ï¸ getCoursesByTagInternal: Fetching courses for tag "${e}" (includeHidden: ${t}, limit: ${l||"none"})...`),console.log(`ðŸ·ï¸ IMPORTANT: NO tag filter, NO signup_enabled filter - getting ALL courses sorted by ${n}`),console.log(`ðŸ·ï¸ Ordering by: ${n} (ascending, nullsFirst: false)`);let i=r.O.from("courses").select("*");i=i.order(n||"priority",{ascending:!0,nullsFirst:!1}),l&&(i=i.limit(l),console.log(`ðŸ·ï¸ Limiting to ${l} courses`));let{data:o,error:d}=await i;if(console.log(`ðŸ·ï¸ Query executed: returned ${o?.length||0} courses (limit was ${l||"none"})`),o&&o.length>0&&console.log(`ðŸ·ï¸ Relevancy scores for returned courses:`,o.map(e=>({id:e.id,title:e.title,[n]:e[n],signup_enabled:e.signup_enabled}))),o&&l&&o.length>l&&console.error(`âŒ ERROR: Query returned ${o.length} courses but limit was ${l}! This should not happen.`),d){console.error("âŒ getCoursesByTagInternal DATABASE ERROR:",d),console.error("Error code:",d.code),console.error("Error message:",d.message),console.warn("âš ï¸ Falling back to priority-based ordering...");let e=r.O.from("courses").select("*");e=e.order("priority",{ascending:!0,nullsFirst:!1}),l&&(e=e.limit(l));let{data:s,error:t}=await e;if(t)return console.error("âŒ Fallback query also failed:",t),[];let n=(s||[]).map(a);return console.log(`ðŸ·ï¸ getCoursesByTagInternal (fallback): Returned ${n.length} courses`),n}if(!o||0===o.length)return console.warn(`âš ï¸ getCoursesByTagInternal: No courses found for tag "${e}"`),[];let c=o.map(a);return l&&c.length>l&&(console.warn(`âš ï¸ WARNING: Database returned ${c.length} courses but limit is ${l}. Truncating to ${l}.`),c=c.slice(0,l)),console.log(`ðŸ·ï¸ getCoursesByTagInternal: Successfully returned ${c.length} courses for tag "${e}" (limit was ${l||"none"})`),c}catch(e){return console.error("âŒ getCoursesByTagInternal EXCEPTION:",e),console.error("Exception message:",e?.message),[]}}async function n(e){return l(e,{includeHidden:!0,limit:10})}},8748:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>r});let r=(0,t(8570).createProxy)(String.raw`/Users/lucia/Documents/GitHub/IFAIP/app/admin/page.tsx#default`)}};var s=require("../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[276,265,157,167],()=>t(5170));module.exports=r})();