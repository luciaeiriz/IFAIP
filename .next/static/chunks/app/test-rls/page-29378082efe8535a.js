(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[957],{1271:function(e,s,l){Promise.resolve().then(l.bind(l,5897))},5897:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return o}});var r=l(7437),t=l(2265),d=l(2141);function o(){var e,s,l,o,n,c,i,a,u,m,x,h,b;let[v,N]=(0,t.useState)({});return(0,t.useEffect)(()=>{(async()=>{let e={},{count:s,error:l}=await d.O.from("courses").select("*",{count:"exact",head:!0});e.count={count:s,error:l};let{data:r,error:t}=await d.O.from("courses").select("*").limit(5);e.selectAll={data:r,error:t,count:(null==r?void 0:r.length)||0};let{data:o,error:n}=await d.O.from("courses").select("*").eq("tag","Business").limit(5);e.selectByTag={data:o,error:n,count:(null==o?void 0:o.length)||0};let{data:c,error:i}=await d.O.from("courses").select("id").limit(5);e.selectIds={data:c,error:i,count:(null==c?void 0:c.length)||0},N(e)})()},[]),(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"RLS Policy Test"}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"font-semibold text-lg mb-2",children:"Test 1: Count Query"}),(null===(e=v.count)||void 0===e?void 0:e.error)?(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:[(0,r.jsxs)("p",{className:"text-red-800 font-semibold",children:["Error: ",v.count.error.message]}),(0,r.jsxs)("p",{className:"text-red-600 text-sm",children:["Code: ",v.count.error.code]})]}):(0,r.jsxs)("p",{className:"text-lg",children:[(0,r.jsx)("span",{className:"font-semibold",children:null!==(m=null===(s=v.count)||void 0===s?void 0:s.count)&&void 0!==m?m:0})," courses found"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"font-semibold text-lg mb-2",children:"Test 2: Select All (limit 5)"}),(null===(l=v.selectAll)||void 0===l?void 0:l.error)?(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:[(0,r.jsxs)("p",{className:"text-red-800 font-semibold",children:["Error: ",v.selectAll.error.message]}),(0,r.jsxs)("p",{className:"text-red-600 text-sm",children:["Code: ",v.selectAll.error.code]})]}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-lg mb-2",children:[(0,r.jsx)("span",{className:"font-semibold",children:null!==(x=null===(o=v.selectAll)||void 0===o?void 0:o.count)&&void 0!==x?x:0})," courses returned"]}),(null===(n=v.selectAll)||void 0===n?void 0:n.data)&&v.selectAll.data.length>0&&(0,r.jsx)("div",{className:"bg-gray-50 rounded p-3",children:(0,r.jsx)("pre",{className:"text-xs overflow-auto",children:JSON.stringify(v.selectAll.data[0],null,2)})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"font-semibold text-lg mb-2",children:"Test 3: Select by Tag (Business)"}),(null===(c=v.selectByTag)||void 0===c?void 0:c.error)?(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:[(0,r.jsxs)("p",{className:"text-red-800 font-semibold",children:["Error: ",v.selectByTag.error.message]}),(0,r.jsxs)("p",{className:"text-red-600 text-sm",children:["Code: ",v.selectByTag.error.code]})]}):(0,r.jsxs)("p",{className:"text-lg",children:[(0,r.jsx)("span",{className:"font-semibold",children:null!==(h=null===(i=v.selectByTag)||void 0===i?void 0:i.count)&&void 0!==h?h:0})," Business courses found"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"font-semibold text-lg mb-2",children:"Test 4: Select Just IDs"}),(null===(a=v.selectIds)||void 0===a?void 0:a.error)?(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded p-3",children:[(0,r.jsxs)("p",{className:"text-red-800 font-semibold",children:["Error: ",v.selectIds.error.message]}),(0,r.jsxs)("p",{className:"text-red-600 text-sm",children:["Code: ",v.selectIds.error.code]})]}):(0,r.jsxs)("p",{className:"text-lg",children:[(0,r.jsx)("span",{className:"font-semibold",children:null!==(b=null===(u=v.selectIds)||void 0===u?void 0:u.count)&&void 0!==b?b:0})," IDs returned"]})]})]}),(0,r.jsx)("div",{className:"mt-6 bg-yellow-50 border border-yellow-200 rounded p-4",children:(0,r.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,r.jsx)("strong",{children:"Note:"})," Check the browser console (F12) for detailed logs."]})})]})})}},2141:function(e,s,l){"use strict";l.d(s,{O:function(){return o}});var r=l(3053);let t="https://ktqjebihzkbhsvbqpbui.supabase.co",d="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt0cWplYmloemtiaHN2YnFwYnVpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYwNDQwNDksImV4cCI6MjA4MTYyMDA0OX0.VVd6upefHH2g23ijFyx5mv7uJJdt9Xuz9jUkL-Jn-F0";if(!t||!d)throw Error("Missing Supabase environment variables. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY");let o=(0,r.eI)(t,d,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})}},function(e){e.O(0,[53,971,117,744],function(){return e(e.s=1271)}),_N_E=e.O()}]);