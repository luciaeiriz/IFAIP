(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[826],{5957:function(e,r,t){Promise.resolve().then(t.bind(t,3188))},3188:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return p}});var s=t(7437),n=t(2265),a=t(9376),i=t(7648),l=t(7119),o=t(9385),c=t(2141);async function u(e){try{let{error:r}=await c.O.from("signups").insert([e]);if(r)return console.error("Error creating signup:",r),{success:!1,error:r.message};return{success:!0}}catch(e){return console.error("Error in createSignup:",e),{success:!1,error:"Failed to submit signup"}}}function d(e){let{message:r,type:t,isVisible:a,onClose:i}=e;return((0,n.useEffect)(()=>{if(a){let e=setTimeout(()=>{i()},5e3);return()=>clearTimeout(e)}},[a,i]),a)?(0,s.jsx)("div",{className:"fixed bottom-4 right-4 z-50 animate-in slide-in-from-bottom-5",children:(0,s.jsx)("div",{className:"rounded-lg px-6 py-4 shadow-lg ".concat("success"===t?"bg-green-50 text-green-800 border border-green-200":"bg-red-50 text-red-800 border border-red-200"),children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:["success"===t?(0,s.jsx)("svg",{className:"h-5 w-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):(0,s.jsx)("svg",{className:"h-5 w-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),(0,s.jsx)("p",{className:"font-medium",children:r}),(0,s.jsx)("button",{onClick:i,className:"ml-4 text-gray-400 hover:text-gray-600",children:(0,s.jsx)("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}):null}let m=l.Ry({first_name:l.Z_().min(1,"First name is required").max(100),last_name:l.Z_().min(1,"Last name is required").max(100),email:l.Z_().email("Please enter a valid email address")});function x(){let e=(0,a.useParams)(),r=(0,a.useSearchParams)(),t=(0,a.useRouter)(),l=e.courseId,[c,x]=(0,n.useState)(null),[p,g]=(0,n.useState)(!0),[f,h]=(0,n.useState)(!1),[b,y]=(0,n.useState)({first_name:"",last_name:"",email:""}),[_,v]=(0,n.useState)({}),[j,N]=(0,n.useState)(null),w=r.get("tag")||"Business",k=r.get("source")||null;(0,n.useEffect)(()=>{let e=async()=>{g(!0);try{let e=await (0,o.Yt)(l);x(e)}catch(e){console.error("Error fetching course:",e),N({message:"Failed to load course information",type:"error"})}finally{g(!1)}};l&&e()},[l]);let S=e=>r=>{y(t=>({...t,[e]:r.target.value})),_[e]&&v(r=>({...r,[e]:void 0}))},C=async e=>{e.preventDefault(),v({});let r=m.safeParse(b);if(!r.success){let e={};r.error.errors.forEach(r=>{r.path[0]&&(e[r.path[0]]=r.message)}),v(e);return}h(!0);try{let e=function(){let e=new URLSearchParams(window.location.search);return{utm_source:e.get("utm_source")||void 0,utm_medium:e.get("utm_medium")||void 0,utm_campaign:e.get("utm_campaign")||void 0,utm_term:e.get("utm_term")||void 0,utm_content:e.get("utm_content")||void 0}}(),s={...r.data,course_id:l,landing_tag:w,source:k,...e},n=await u(s);n.success?t.push("/thank-you?course_id=".concat(l)):(N({message:n.error||"Failed to submit signup. Please try again.",type:"error"}),h(!1))}catch(e){console.error("Error submitting signup:",e),N({message:"An error occurred. Please try again.",type:"error"}),h(!1)}};return p?(0,s.jsx)("div",{className:"mx-auto max-w-2xl px-4 py-16 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary-600 border-r-transparent"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading course information..."})]})}):c?(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsxs)("div",{className:"mx-auto max-w-2xl px-4 py-16 sm:px-6 lg:px-8",children:[(0,s.jsxs)("button",{onClick:()=>t.back(),className:"mb-6 flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[(0,s.jsx)("svg",{className:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Sign Up for Course"}),(0,s.jsx)("h2",{className:"text-xl text-gray-700",children:c.title}),c.provider&&(0,s.jsxs)("p",{className:"mt-2 text-sm text-gray-500",children:["by ",c.provider]})]}),(0,s.jsx)("div",{className:"rounded-lg border border-gray-200 bg-white p-8 shadow-sm",children:(0,s.jsxs)("form",{onSubmit:C,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"first_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),(0,s.jsx)("input",{type:"text",id:"first_name",value:b.first_name,onChange:S("first_name"),className:"w-full rounded-md border ".concat(_.first_name?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-primary-500 focus:ring-primary-500"," px-4 py-2 focus:outline-none focus:ring-2"),placeholder:"Enter your first name"}),_.first_name&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:_.first_name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"last_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),(0,s.jsx)("input",{type:"text",id:"last_name",value:b.last_name,onChange:S("last_name"),className:"w-full rounded-md border ".concat(_.last_name?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-primary-500 focus:ring-primary-500"," px-4 py-2 focus:outline-none focus:ring-2"),placeholder:"Enter your last name"}),_.last_name&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:_.last_name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),(0,s.jsx)("input",{type:"email",id:"email",value:b.email,onChange:S("email"),className:"w-full rounded-md border ".concat(_.email?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300 focus:border-primary-500 focus:ring-primary-500"," px-4 py-2 focus:outline-none focus:ring-2"),placeholder:"your.email@example.com"}),_.email&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:_.email})]}),(0,s.jsx)("button",{type:"submit",disabled:f,className:"w-full rounded-md bg-primary-600 px-6 py-3 text-base font-semibold text-white shadow-sm transition-colors hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:f?"Submitting...":"Complete Sign Up"}),(0,s.jsx)("div",{className:"pt-4 border-t border-gray-200",children:(0,s.jsxs)("p",{className:"text-xs text-gray-600 text-center",children:["By signing up, you agree to our"," ",(0,s.jsx)(i.default,{href:"/terms",className:"text-primary-600 hover:text-primary-700 underline",children:"Terms of Service"})," ","and"," ",(0,s.jsx)(i.default,{href:"/privacy",className:"text-primary-600 hover:text-primary-700 underline",children:"Privacy Policy"})]})})]})})]}),j&&(0,s.jsx)(d,{message:j.message,type:j.type,isVisible:!0,onClose:()=>N(null)})]}):(0,s.jsx)("div",{className:"mx-auto max-w-2xl px-4 py-16 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Course Not Found"}),(0,s.jsx)("p",{className:"text-gray-600 mb-8",children:"The course you're trying to sign up for doesn't exist."}),(0,s.jsx)(i.default,{href:"/courses",className:"inline-block rounded-md bg-primary-600 px-6 py-3 text-base font-semibold text-white hover:bg-primary-700",children:"Browse Courses"})]})})}function p(){return(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)("div",{className:"mx-auto max-w-2xl px-4 py-16 sm:px-6 lg:px-8",children:(0,s.jsx)("div",{className:"text-center",children:"Loading..."})}),children:(0,s.jsx)(x,{})})}},9385:function(e,r,t){"use strict";t.d(r,{V3:function(){return i},Yt:function(){return a}});var s=t(2141);function n(e){var r,t;let s=e.course_type||null;return{id:String(e.id||""),title:String(e.title||""),description:String(e.description||""),headline:e.headline||null,bullet_points:Array.isArray(e.bullet_points)?e.bullet_points:null,provider:e.provider||null,level:e.level||"Beginner",duration:String(e.duration||""),tags:e.tag?[e.tag]:[],external_url:e.external_url||null,priority:Number(e.priority)||999,rating:e.rating?Number(e.rating):null,reviews:e.reviews?Number(e.reviews):null,course_type:s,key_skills:e.key_skills||null,modules:e.modules||null,instructors:e.instructors||null,effort:e.effort||null,languages:e.languages||null,price:e.free_trial||void 0,source:String(e.source||""),signup_enabled:!!(null===(r=e.signup_enabled)||void 0===r||r),is_featured:!!(null!==(t=e.is_featured)&&void 0!==t&&t),price_label:e.price_label||null,free_trial:e.free_trial||null,created_at:e.created_at||null,updated_at:e.updated_at||null}}async function a(e){try{let{data:r,error:t}=await s.O.from("courses").select("*").eq("id",e).maybeSingle();if(t)throw console.error("Error fetching course by ID:",t),t;if(!r)return null;return n(r)}catch(e){throw console.error("Error in getCourseById:",e),e}}async function i(){try{let{data:e,error:r}=await s.O.from("courses").select("*").order("priority",{ascending:!0,nullsFirst:!1});if(r)throw console.error("Error fetching all courses:",r),r;return(e||[]).map(n)}catch(e){throw console.error("Error in getAllCourses:",e),e}}},2141:function(e,r,t){"use strict";t.d(r,{O:function(){return i}});var s=t(3053);let n="https://ktqjebihzkbhsvbqpbui.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt0cWplYmloemtiaHN2YnFwYnVpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYwNDQwNDksImV4cCI6MjA4MTYyMDA0OX0.VVd6upefHH2g23ijFyx5mv7uJJdt9Xuz9jUkL-Jn-F0";if(!n||!a)throw Error("Missing Supabase environment variables. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY");let i=(0,s.eI)(n,a,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})}},function(e){e.O(0,[972,53,92,971,117,744],function(){return e(e.s=5957)}),_N_E=e.O()}]);