(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[407],{1698:function(e,r,t){Promise.resolve().then(t.bind(t,6473))},6473:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return o}});var s=t(7437),n=t(2265),a=t(9376),i=t(9475);function o(){let e=(0,a.useRouter)(),[r,t]=(0,n.useState)(""),[o,u]=(0,n.useState)(!1),[c,l]=(0,n.useState)(!1),[m,d]=(0,n.useState)(null),h=async s=>{s.preventDefault(),d(null),u(!0);try{let s=(0,i.S)(),n=await fetch("/api/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,landing_tag:"Membership",...s})}),a=await n.json();n.ok&&a.success?(l(!0),t(""),setTimeout(()=>{e.push("/membership?success=true")},2e3)):d(a.error||"Failed to submit. Please try again.")}catch(e){d("An error occurred. Please try again.")}finally{u(!1)}};return c?(0,s.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center px-4",children:(0,s.jsxs)("div",{className:"max-w-md w-full text-center",children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("svg",{className:"mx-auto h-12 w-12 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Thank You!"}),(0,s.jsx)("p",{className:"text-gray-700 mb-6",children:"We've received your membership interest. We'll be in touch soon."})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center px-4 py-16",children:(0,s.jsxs)("div",{className:"max-w-md w-full",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Join IFAIP Membership"}),(0,s.jsx)("p",{className:"text-gray-600 mb-8",children:"Enter your email to express interest in IFAIP membership."}),(0,s.jsxs)("form",{onSubmit:h,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),(0,s.jsx)("input",{type:"email",id:"email",required:!0,value:r,onChange:e=>t(e.target.value),className:"w-full rounded-md border border-gray-300 px-4 py-3 focus:border-[#36498C] focus:outline-none focus:ring-1 focus:ring-[#36498C]",placeholder:"your.email@example.com"})]}),m&&(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,s.jsx)("p",{className:"text-sm text-red-800",children:m})}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("button",{type:"submit",disabled:o,className:"flex-1 bg-gray-900 text-white font-semibold hover:bg-gray-800 transition-colors px-6 py-3 rounded-md disabled:opacity-50 disabled:cursor-not-allowed",children:o?"Submitting...":"Submit"}),(0,s.jsx)("button",{type:"button",onClick:()=>e.push("/membership"),className:"px-6 py-3 border-2 border-gray-300 bg-white text-gray-700 font-semibold hover:bg-gray-50 transition-colors rounded-md",children:"Cancel"})]})]})]})})}},9475:function(e,r,t){"use strict";t.d(r,{$:function(){return n},S:function(){return a}});var s=t(2141);async function n(e){try{let{error:r}=await s.O.from("leads").insert([e]);if(r)return console.error("Error creating lead:",r),{success:!1,error:r.message};return{success:!0}}catch(e){return console.error("Error in createLead:",e),{success:!1,error:"Failed to submit lead"}}}function a(){let e=new URLSearchParams(window.location.search);return{utm_source:e.get("utm_source")||void 0,utm_medium:e.get("utm_medium")||void 0,utm_campaign:e.get("utm_campaign")||void 0}}},2141:function(e,r,t){"use strict";t.d(r,{O:function(){return i}});var s=t(3053);let n="https://ktqjebihzkbhsvbqpbui.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt0cWplYmloemtiaHN2YnFwYnVpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYwNDQwNDksImV4cCI6MjA4MTYyMDA0OX0.VVd6upefHH2g23ijFyx5mv7uJJdt9Xuz9jUkL-Jn-F0";if(!n||!a)throw Error("Missing Supabase environment variables. Please set NEXT_PUBLIC_SUPABASE_URL and NEXT_PUBLIC_SUPABASE_ANON_KEY");let i=(0,s.eI)(n,a,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})},9376:function(e,r,t){"use strict";var s=t(5475);t.o(s,"useParams")&&t.d(r,{useParams:function(){return s.useParams}}),t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})}},function(e){e.O(0,[53,971,117,744],function(){return e(e.s=1698)}),_N_E=e.O()}]);